{% extends 'layout.html' %}

{% block encabezado %}
     <h1>Mediclean Ruta</h1>
     <h2>Administrador de ruta</h2>
     <h2>({{ datos.nombrePagina }})</h2>
{% endblock %}
<!-- ------------------- BODY A ----------------------------- -->
{% block body_a %}
      <div class="tabla-contenedor">
      <p class="titulos">>>>>{{ datos.ruta }}</p>
      <hr>
	  <table class="tbresultados">
          <thead>
               {% for dato in datos.rutaLista.encabezados %}
                    <th>{{ dato }}</th>
               {% endfor %}
                    <th>ACCIONES</th>
          </thead>
          <tbody>
               {% for fila in datos.rutaLista.datos %}
                    <tr {% if "DEUDA" in fila.11 or "deuda" in fila.11 or "RETIRO EN CAMINO" in fila.11 or "APLAZADO" in fila.11 %} 
                         {% if "RETIRO EN CAMINO" in fila.8 %}
                              style="background-color: lightgreen;" 
                         {% elif "APLAZADO" in fila.8 %}
                              style="background-color: cornflowerblue;" 
                         {% else %}
                              style="background-color: pink;" 
                         {% endif %}
                    {% endif %}>
                    {% for data in fila %}
                        {% if data == "0" or data == None %}
                            <td>-</td>
                        {% else %}
                            <td>{{ data }}</td>
                        {% endif %}
                    {% endfor %}
                    <td>
                         <form method="post" action="{{ url_for('rutaactual', aut=datos.aut) }}" style="display:flex">
                              <button type="submit" name="enCamino" value="{{ fila.0 }}" style="height: 50px" {{ datos.cpEnabled }}>
                                  {% if "RETIRO EN CAMINO" in fila.7 %}
                                        APLAZ
                                  {% elif "APLAZADO" in fila.7 %}
                                        DESM
                                  {% else %}
                                        ENCAM
                                  {% endif %}
                              </button>
                              <button type="submit" name="cliente_ruta_realizado" value="{{ fila[-1] }}" style="height: 50px" {{ datos.cpEnabled }}>CONF</button>
                              <button type="submit" name="cliente_ruta_pospuesto" value="{{ fila[-1] }}" style="height: 50px" {{ datos.cpEnabled }}>POSP</button>
                              <button type="submit" name="cliente_ruta_eliminar" value="{{ fila[-1] }}" style="height: 50px" {{ datos.cpEnabled }}>ELIM</button>
                         </form>
                    </td>
                    </tr>
               {% endfor %}
          </tbody>
          </table>
	  </div>
          <form class="formularioIngreso" name="finruta" method="post" action="{{ url_for('rutaactual', aut=datos.aut) }}">
               <button class="botonanimado" name="agrega_cliente_manual" value="to_form">Agrega cliente manual</button>
               <button class="botonanimado" name="finalizaRutaActual" value="finalizar">Finalizar ruta actual</button>
               <button class="botonanimado" name="cancelaRutaActual" value="cancelar" style="background: red;">Cancelar ruta</button>
          </form>
          <div id="ordenaruta">
               <form class="formularioIngreso" name="ordenaRuta" method="post" action="{{ url_for('rutaactual', aut=datos.aut) }}">
                    <label for="uboriginal">Numero a mover: <input type="number" name="uboriginal" style="width: 50px;" {{ datos.reubicarEnabled }}></label>
                    <label for="ubdestino">Posicion destino: <input type="number" name="ubdestino" style="width: 50px;" {{ datos.reubicarEnabled }}></label>
                    <button class="botonanimado" name="reubicar" value="reubicar" {{ datos.reubicarEnabled }}>Mover posicion cliente</button>
               </form>
          </div>
{% endblock %}
<!-- -------------------------BODY B------------------------------- -->
{% block body_b %}
{% endblock %}
